<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <link href='https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons' rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.min.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    <title>SimpleShopping</title>
</head>
<body>

<div id="app"></div>

<template id="tpl_footer">
    <v-footer dark height="auto" :app="false">
        <v-card flat tile class="indigo lighten-1 white--text text-xs-center">
            <v-card-text>
                <v-btn v-for="icon, index in icons" :key="index" class="mx-3 white--text" icon>
                    <v-icon size="24px">{{ icon }}</v-icon>
                </v-btn>
            </v-card-text>

            <v-card-text class="white--text pt-0">
                Phasellus feugiat arcu sapien, et iaculis ipsum elementum sit amet. Mauris cursus commodo interdum.
                Praesent ut risus eget metus luctus accumsan id ultrices nunc. Sed at orci sed massa consectetur
                dignissim a sit amet dui. Duis commodo vitae velit et faucibus. Morbi vehicula lacinia malesuada. Nulla
                placerat augue vel ipsum ultrices, cursus iaculis dui sollicitudin. Vestibulum eu ipsum vel diam
                elementum tempor vel ut orci. Orci varius natoque penatibus et magnis dis parturient montes, nascetur
                ridiculus mus.
            </v-card-text>

            <v-divider></v-divider>

            <v-card-text class="white--text">
                &copy;{{ year }} — <strong>{{ siteName }}</strong>
            </v-card-text>
        </v-card>
    </v-footer>
</template>

<template id="tpl_header">
    <v-jumbotron :gradient="gradient" dark src="https://cdn.vuetifyjs.com/images/parallax/material2.jpg" height="150px">
        <v-container fill-height>
            <v-layout align-center>
                <v-flex text-xs-center>
                    <h4 class="display-3">Сервис на стадии тестирования</h4>
                </v-flex>
            </v-layout>
        </v-container>
    </v-jumbotron>
</template>

<template id="template_app">
    <v-app>
        <my-header></my-header>
        <v-container grid-list-md text-xs-center>
            <v-layout row wrap>
                <v-flex xs12>
                    <order-form></order-form>
                </v-flex>
            </v-layout>
        </v-container>
        <my-footer></my-footer>
    </v-app>
</template>

<template id="template_order-form">
    <div>
        <v-dialog v-model="dialog.visible" persistent max-width="290">
            <v-card>
                <v-card-title class="headline">Внимание</v-card-title>
                <v-card-text>{{ dialog.text }}</v-card-text>
                <v-card-actions>
                    <v-spacer></v-spacer>
                    <v-btn color="green darken-1" flat @click.native="dialog.visible = false">Закрыть</v-btn>
                </v-card-actions>
            </v-card>
        </v-dialog>

        <v-form @submit.prevent="add()">

            <v-container grid-list-md text-xs-center>
                <v-layout row wrap>
                    <v-flex xs9>
                        <v-text-field v-model.trim="item" label="Товар" outline :counter="100"></v-text-field>
                    </v-flex>
                    <v-flex xs3>
                        <v-btn outline color="indigo" :large="true" type="submit" :disabled="!item.length">Добавить
                        </v-btn>
                    </v-flex>
                </v-layout>
            </v-container>

            <v-card>
                <v-toolbar card color="indigo" dark dense>
                    <v-toolbar-title class="body-2">Товары в корзине</v-toolbar-title>
                </v-toolbar>

                <v-list two-line subheader v-if="form.list.length">
                    <v-list-tile v-for="(item, index) in form.list" :key="index" avatar @click="">
                        <v-list-tile-avatar>
                            <v-icon class="grey lighten-1 white--text">shopping_cart</v-icon>
                        </v-list-tile-avatar>

                        <v-list-tile-content>
                            <v-list-tile-title>{{ item }}</v-list-tile-title>
                        </v-list-tile-content>

                        <v-list-tile-action>
                            <v-tooltip bottom>
                                <v-btn flat icon color="red" @click="remove(item)" slot="activator">
                                    <v-icon>delete</v-icon>
                                </v-btn>
                                <span>удалить</span>
                            </v-tooltip>
                        </v-list-tile-action>
                    </v-list-tile>
                </v-list>

                <v-card-text v-else>
                    <h4>Вы пока что ничего не добавили</h4>
                </v-card-text>
            </v-card>

        </v-form>

        <v-form v-if="form.list.length">
            <v-container>
                <v-layout row wrap>

                    <v-flex xs12 sm3>
                        <v-text-field v-model="form.name" label="Имя" outline></v-text-field>
                    </v-flex>

                    <v-flex xs12 sm4>
                        <v-text-field v-model="form.phone" mask="phone" label="Номер телефона" outline></v-text-field>
                    </v-flex>

                    <v-flex xs12 sm5>
                        <v-autocomplete
                                outline
                                v-model="form.delivery_address"
                                :items="items"
                                :loading="isLoading"
                                :search-input.sync="search"
                                label="Адрес доставки"
                                placeholder="Начните ввод для поиска"
                                return-object
                                item-text="name"
                                item-value="value"
                                :clearable="true"
                        ></v-autocomplete>
                    </v-flex>

                    <v-flex xs12>
                        <v-textarea
                                v-model="form.comment"
                                outline
                                label="Примечание"
                        ></v-textarea>
                    </v-flex>

                </v-layout>
            </v-container>
            <template>
                <div class="text-xs-center">
                    <v-btn
                            :disabled="loader || !isFormValid()"
                            :loading="loader"
                            outline
                            color="indigo"
                            @click="confirm()"
                    >
                        Подтвердить заказ
                    </v-btn>

                    <v-dialog
                            v-model="loader"
                            hide-overlay
                            persistent
                            width="300"
                    >
                        <v-card color="primary" dark>
                            <v-card-text>
                                Оформления заказа...
                                <v-progress-linear
                                        indeterminate
                                        color="white"
                                        class="mb-0"
                                ></v-progress-linear>
                            </v-card-text>
                        </v-card>
                    </v-dialog>
                </div>
            </template>
        </v-form>
    </div>
</template>

<script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue-resource@1.5.1"></script>

<script src="/public/js/utils.js"></script>
<script src="/public/js/my-header.js"></script>
<script src="/public/js/my-footer.js"></script>
<script src="/public/js/order-form.js"></script>
<script src="/public/js/app.js"></script>
<script src="/public/js/main.js"></script>

</body>
</html>